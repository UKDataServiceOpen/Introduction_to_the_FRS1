<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Exercise 1 : Using SPSS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>
<style>

      .quarto-title-block .quarto-title-banner h1,
      .quarto-title-block .quarto-title-banner h2,
      .quarto-title-block .quarto-title-banner h3,
      .quarto-title-block .quarto-title-banner h4,
      .quarto-title-block .quarto-title-banner h5,
      .quarto-title-block .quarto-title-banner h6
      {
        color: #742082;
      }

      .quarto-title-block .quarto-title-banner {
        color: #742082;
background: white;
      }
</style>


<link rel="stylesheet" href="ukds.css">
</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Hierarchical and Flat File_Using R.html">The Hierarchical and Flat File Datasets</a></li><li class="breadcrumb-item"><a href="./Hierarchical and Flat File_Using SPSS.html">Exercise 1 : Using SPSS</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./Hierarchical and Flat File_Using R.html">The Hierarchical and Flat File Datasets</a></li><li class="breadcrumb-item"><a href="./Hierarchical and Flat File_Using SPSS.html">Exercise 1 : Using SPSS</a></li></ol></nav>
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Exercise 1 : Using SPSS</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
      <a href="./index.html" class="sidebar-logo-link">
      <img src="./pics/UKDS_Logos_Col_Grey_300dpi.png" alt="" class="sidebar-logo py-0 d-lg-inline d-none">
      </a>
      </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">The Hierarchical and Flat File Datasets</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Hierarchical and Flat File_Using R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 1 : Using R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Hierarchical and Flat File_Using SPSS.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Exercise 1 : Using SPSS</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Merging Data and Applying Weights</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Merging Data and Applying Weights_Using R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 2 : Using R</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./Merging Data and Applying Weights_Using SPSS.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 2 : Using SPSS</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started">Getting started</a>
  <ul class="collapse">
  <li><a href="#the-dataset" id="toc-the-dataset" class="nav-link" data-scroll-target="#the-dataset">1. The dataset</a></li>
  <li><a href="#setting-up-spss" id="toc-setting-up-spss" class="nav-link" data-scroll-target="#setting-up-spss">2. Setting up SPSS</a>
  <ul class="collapse">
  <li><a href="#setting-up-and-showing-the-working-directory" id="toc-setting-up-and-showing-the-working-directory" class="nav-link" data-scroll-target="#setting-up-and-showing-the-working-directory">Setting up and showing the working directory</a></li>
  <li><a href="#opening-the-four-frs-tables" id="toc-opening-the-four-frs-tables" class="nav-link" data-scroll-target="#opening-the-four-frs-tables">Opening the four FRS tables</a></li>
  </ul></li>
  <li><a href="#preparing-the-datasets" id="toc-preparing-the-datasets" class="nav-link" data-scroll-target="#preparing-the-datasets">3. Preparing the datasets</a></li>
  <li><a href="#the-variables" id="toc-the-variables" class="nav-link" data-scroll-target="#the-variables">4. The variables</a></li>
  </ul></li>
  <li><a href="#the-hierarchical-tables" id="toc-the-hierarchical-tables" class="nav-link" data-scroll-target="#the-hierarchical-tables">The hierarchical tables</a>
  <ul class="collapse">
  <li><a href="#explore-the-datasets" id="toc-explore-the-datasets" class="nav-link" data-scroll-target="#explore-the-datasets">Explore the datasets</a></li>
  <li><a href="#descriptive-analysis" id="toc-descriptive-analysis" class="nav-link" data-scroll-target="#descriptive-analysis">Descriptive analysis</a>
  <ul class="collapse">
  <li><a href="#examining-variables" id="toc-examining-variables" class="nav-link" data-scroll-target="#examining-variables">Examining variables</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#the-flat-file" id="toc-the-flat-file" class="nav-link" data-scroll-target="#the-flat-file">The Flat File</a>
  <ul class="collapse">
  <li><a href="#explore-the-datasets-1" id="toc-explore-the-datasets-1" class="nav-link" data-scroll-target="#explore-the-datasets-1">Explore the datasets</a></li>
  <li><a href="#descriptive-analysis-1" id="toc-descriptive-analysis-1" class="nav-link" data-scroll-target="#descriptive-analysis-1">Descriptive analysis</a>
  <ul class="collapse">
  <li><a href="#examining-variables-1" id="toc-examining-variables-1" class="nav-link" data-scroll-target="#examining-variables-1">Examining variables</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<p>In this exercise, we use data from the Family Resources Survey (FRS), 2022-2023 financial year to get familiar with the hierarchical and flat file datasets using SPSS.</p>
<section id="getting-started" class="level1">
<h1>Getting started</h1>
<section id="the-dataset" class="level2">
<h2 class="anchored" data-anchor-id="the-dataset">1. The dataset</h2>
<p>The dataset we will be using in this exercise is the <a href="https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=9252">Family Resources Survey, 2022-2023</a>. These data are <a href="https://www.ukdataservice.ac.uk/get-data/data-access-policy">safeguarded</a>. You can download them from the UK Data Service after <a href="https://ukdataservice.ac.uk/help/registration/registration-login-faqs/">registration</a>.</p>
<p>To get the Family Resources Survey (FRS), 2022-2023 dataset, go to the data <a href="https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=9252">catalogue page</a>, login to your account (create an account if you do not already have one), download and save the SPSS version, which we will use in this exercise.</p>
<p>Create a new folder to save the downloaded data and analysis work in appropriate location on your machine and give that folder a name.</p>
<p>The exercise below assumes that the dataset has been saved in a new folder named UKDS on your Desktop (Windows computers). The path would typically be <code>C:\\Users\\YOUR_USER_NAME\\Desktop\\UKDS</code>. You can change it to the location that best suits you.</p>
<p>Remember to adjust the code below to match the location of the data on your machine.</p>
<p>The FRS is a hierarchical dataset provided every year in multiple data files (known as ‘tables’ in the FRS language). The number of these tables varies, depending on the year of the survey. The 2022-2023 FRS has 25 tables. In this exercise, we will use the two general-purpose tables “adult.sav” and “benunit.sav” as well as the specialised table “pension.sav” and the FRS flat file “frs2223.sav” to:</p>
<ul>
<li>Make a subset of the datasets.</li>
<li>Explore the variables in each dataset by conducting descriptive analysis (frequency tables, summary statistics and cross tabulation).</li>
</ul>
</section>
<section id="setting-up-spss" class="level2">
<h2 class="anchored" data-anchor-id="setting-up-spss">2. Setting up SPSS</h2>
<section id="setting-up-and-showing-the-working-directory" class="level3">
<h3 class="anchored" data-anchor-id="setting-up-and-showing-the-working-directory">Setting up and showing the working directory</h3>
<p>First, define the location of the working directory at the beginning of your SPSS syntax file. You can do this using the<code>cd</code> command, which stands for “change directory”.</p>
<p>You can check the working directory using the <code>show DIRECTORY</code> command.</p>
<pre><code>cd 'C:\Users\YOUR_USER_NAME\Desktop\UKDS'.
  show DIRECTORY.</code></pre>
<p><strong>Note</strong>: change the command above to match your working directory.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 1.png" class="img-fluid figure-img"></p>
<figcaption>Output of the show DIRECTORY command</figcaption>
</figure>
</div>
</section>
<section id="opening-the-four-frs-tables" class="level3">
<h3 class="anchored" data-anchor-id="opening-the-four-frs-tables">Opening the four FRS tables</h3>
<p>We start by opening the four datasets adult.sav, benunit.sav, pension.sav and frs2223.sav that we will be using in this exercise. If you have your working directory saved to the folder location, the following code should open these datasets:</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/spss28/adult.sav'.
GET FILE='UKDA-9252-spss/spss/spss28/benunit.sav'.
GET FILE='UKDA-9252-spss/spss/spss28/pension.sav'.
GET FILE='UKDA-9252-spss/spss/spss28/frs2223.sav'.</code></pre>
</section>
</section>
<section id="preparing-the-datasets" class="level2">
<h2 class="anchored" data-anchor-id="preparing-the-datasets">3. Preparing the datasets</h2>
<p>After opening the FRS tables, we begin with exploring the adult.sav, benunit.sav, pension.sav and frs2223.sav datasets.</p>
<p>But first, we will have a quick look at the number of observations (cases) and the number of the variables in these tables. You can do this by either inspect variables and cases in the <code>Data view</code> or use the codes below to produce a summary of all the variables in each dataset. We will start with the adult.sav dataset as follows:</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/spss28/adult.sav'.
  CODEBOOK all.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 2.png" class="img-fluid figure-img"></p>
<figcaption>SPSS codebook output of the first variable in adult.sav dataset</figcaption>
</figure>
</div>
<p>You can repeat the same steps to get a summary of all the variables in benunit.sav, pension.sav and frs2223.sav datasets as follows:</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/spss28/benunit.sav'.
  CODEBOOK all.

GET FILE='UKDA-9252-spss/spss/spss28/pension.sav'.
  CODEBOOK all.

GET FILE='UKDA-9252-spss/spss/spss28/frs2223.sav'.
  CODEBOOK all.</code></pre>
<p>You will notice that the frs2223.sav table has the largest number of variables (7,070 variables). The adult.sav table has 587 variables, the benunit.sav table has 276 variables, and the pension.sav table has 50 variables.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Answers</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<ol type="1">
<li>Why is the number of the variables in the pension.sav table the smallest?</li>
<li>Which table has the smallest number of observations?</li>
<li>Which tables have the same numbers of observations? Why?</li>
</ol>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<ol type="1">
<li>These tables have different units of analysis. The adult table include data at the individual level, the benunit and the frs2223 tables have data at the benefit unit (family) level. The pension table is a specialised data that can be analysed at person, benefit unit and household level, which is a subset data representing participants who are receiving income from a pension (see the <a href="https://beta.ukdataservice.ac.uk/datacatalogue/studies/study?id=9252#!/documentation">FRS documentation</a> for the definition of each level).</li>
<li>The pension table has the smallest number of observations (15233 observations).</li>
<li>The frs2223 and benunit have the same numbers of observations (28629). Because both tables include data at benefit unit level.</li>
</ol>
</div>
</div>
</div>
</section>
<section id="the-variables" class="level2">
<h2 class="anchored" data-anchor-id="the-variables">4. The variables</h2>
<p>We will only be using a few variables from each table in this exercise. So, we will create subsets data from these four tables, containing the variables we will use in this exercise. The tables below shows the variables (names and labels) that we will select from each FRS table.</p>
<table class="table-striped table-hover table">
<colgroup>
<col style="width: 40%">
<col style="width: 59%">
</colgroup>
<thead>
<tr class="header">
<th><strong>Variable name</strong></th>
<th><strong>Variable label</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Variables from the adult table</strong></td>
<td></td>
</tr>
<tr class="even">
<td>SERNUM</td>
<td>Sernum</td>
</tr>
<tr class="odd">
<td>BENUNIT</td>
<td>Benefit Unit</td>
</tr>
<tr class="even">
<td>PERSON</td>
<td>Person</td>
</tr>
<tr class="odd">
<td>HEALTH1</td>
<td>Whether has a long standing illness</td>
</tr>
<tr class="even">
<td>SEX</td>
<td>Sex</td>
</tr>
<tr class="odd">
<td>IAGEGR4</td>
<td>Individual Adult 5 Year Age Bands - Anon</td>
</tr>
<tr class="even">
<td>GROSS4</td>
<td>Grossing variable</td>
</tr>
<tr class="odd">
<td><strong>Variables from the benunit table</strong></td>
<td></td>
</tr>
<tr class="even">
<td>SERNUM</td>
<td>Sernum</td>
</tr>
<tr class="odd">
<td>BENUNIT</td>
<td>Benefit Unit</td>
</tr>
<tr class="even">
<td>famtypbu</td>
<td>Family Type</td>
</tr>
<tr class="odd">
<td><strong>Variables from the pension table</strong></td>
<td></td>
</tr>
<tr class="even">
<td>SERNUM</td>
<td>Sernum</td>
</tr>
<tr class="odd">
<td>BENUNIT</td>
<td>Benefit Unit</td>
</tr>
<tr class="even">
<td>PERSON</td>
<td>Person</td>
</tr>
<tr class="odd">
<td>PENPAY</td>
<td>Amount of last payment from pension (continuous variable)</td>
</tr>
<tr class="even">
<td>PENTYPE</td>
<td>Pension Type</td>
</tr>
<tr class="odd">
<td><strong>Variables from the frs2223 table</strong></td>
<td></td>
</tr>
<tr class="even">
<td>SERNUM</td>
<td>Sernum</td>
</tr>
<tr class="odd">
<td>BENUNIT</td>
<td>Benefit Unit</td>
</tr>
<tr class="even">
<td>PERSON</td>
<td>Person</td>
</tr>
<tr class="odd">
<td>HEALTHHD</td>
<td>Whether has a long standing illness</td>
</tr>
<tr class="even">
<td>SEX</td>
<td>Sex</td>
</tr>
<tr class="odd">
<td>FAMTYPBU</td>
<td>Family Type</td>
</tr>
</tbody>
</table>
<pre><code>#Create subset datasets from the original data files
#Use match files and Keep commands
#The code below just keeps the variables we are interested in. We will name the new datasets as frs_adult2223_short, frs_benunit2223_short, frs_pension2223, and frs_frs2223_short, respectively.

GET FILE='UKDA-9252-spss/spss/spss28/adult.sav'.
match files FILE = */keep SERNUM, BENUNIT, PERSON, GROSS4, HEALTH1, SEX, IAGEGR4
Save OUTFILE='frs_adult2223_short.sav'
/COMPRESSED</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 3.png" class="img-fluid figure-img"></p>
<figcaption>Variable view of the frs_adult2223_short subset data</figcaption>
</figure>
</div>
<pre><code>GET FILE='UKDA-9252-spss/spss/spss28/benunit.sav'.
match files FILE = */keep SERNUM, BENUNIT, famtypbu
Save OUTFILE='frs_benunit2223_short.sav'
    /COMPRESSED   
 
GET FILE='UKDA-9252-spss/spss/spss28/pension.sav'.
match files FILE = */keep SERNUM, BENUNIT, PERSON, PENPAY, PENTYPE
Save OUTFILE='frs_pension2223_short.sav'
    /COMPRESSED 

GET FILE='UKDA-9252-spss/spss/spss28/frs2223.sav'.
match files FILE = */keep SERNUM, BENUNIT, PERSONHD, HEALTHHD, SEXHD, FAMTYPBU 
    Save OUTFILE='frs_frs2223_short.sav'
    /COMPRESSED</code></pre>
</section>
</section>
<section id="the-hierarchical-tables" class="level1">
<h1>The hierarchical tables</h1>
<section id="explore-the-datasets" class="level2">
<h2 class="anchored" data-anchor-id="explore-the-datasets">Explore the datasets</h2>
<p>Let’s start by having a quick look at the three newly generated datasets frs_adult2223_short, frs_benunit222_short and frs_pension2223_short.</p>
<p>We will start with the frs_adult2223_short dataset. Either inspect variables and cases in the <code>Data View</code> or use the code below to <code>display a dictionary</code> of all the variables in the dataset.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_adult2223_short.sav'.
    DISPLAY DICTIONARY.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 4.png" class="img-fluid figure-img"></p>
<figcaption>SPSS dictionary for frs_adult2223_short dataset</figcaption>
</figure>
</div>
<p>Now, let’s have a quick look at the frs_benunit2223_short dataset.</p>
<pre><code>
GET FILE='UKDA-9252-spss/spss/frs_benunit2223_short.sav'.
    DISPLAY DICTIONARY.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 5.png" class="img-fluid figure-img"></p>
<figcaption>SPSS dictionary for frs_benunit2223_short dataset</figcaption>
</figure>
</div>
<p>You can have a comprehensive information about the data using the <code>codebook</code> command. So, let’s explore frs_adult2223_short and frs_benunit2223_short datasets.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_adult2223_short.sav'.
    CODEBOOK all.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 6.png" class="img-fluid figure-img"></p>
<figcaption>SPSS codebook output of the first three variables in frs_adult2223_short dataset</figcaption>
</figure>
</div>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_benunit2223_short.sav'.
    CODEBOOK all.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 7.png" class="img-fluid figure-img"></p>
<figcaption>SPSS codebook output of the first three variables in frs_benunit2223_short dataset</figcaption>
</figure>
</div>
<p><strong>Your turn!</strong></p>
<p>Use the frs_pension2223_short dataset to get an idea about the variables.</p>
<ol type="1">
<li>What is the overall sample size of the frs_pension2223_short dataset? Use <code>CODEBOOK</code> command.</li>
<li>List the names and labels of the variables in frs_pension2223_short dataset. Use <code>DISPLAY</code> DICTIONARY command.</li>
</ol>
<p><strong>Outcome!</strong></p>
<ol type="1">
<li>The overall sample size of the frs_pension2223_short dataset is 15233.</li>
</ol>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_pension2223_short.sav'.
  CODEBOOK all.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 8.png" class="img-fluid figure-img"></p>
<figcaption>SPSS codebook output of the first variable in frs_ pension2223_short dataset</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li>Names and labels of the variables in frs_pension2223_short dataset:</li>
</ol>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_pension2223_short.sav'.
  DISPLAY DICTIONARY.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 9.png" class="img-fluid figure-img"></p>
<figcaption>SPSS names and labels of the variables from frs_ pension2223_short dataset</figcaption>
</figure>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Answers</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<ol type="1">
<li>What do PENPAY and PENTYPE measure and how?</li>
<li>What is the value for ‘Amount of last pension payment’ of person 2 from benefit unit 1 with serial no. 16 in the frs_pension2223_short dataset?</li>
</ol>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<ol type="1">
<li>PENPAY records responses to the questions about ‘Amount of last payment from pension’. Responses are numeric. PENTYPE records responses to the questions about ‘Pension Type’. There are six possible responses to the question.</li>
<li>The value for ‘Amount of last pension payment’ of person 2 from benefit unit 1 with serial no. 16 in the frs_pension2223_short dataset is 53.00745.</li>
</ol>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_pension2223_short.sav'.
  CODEBOOK PENPAY PENTYPE</code></pre>
</div>
</div>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 10.png" class="img-fluid figure-img"></p>
<figcaption>SPSS codebook output of PENPAY and PENTYPE in frs_ pension2223_short dataset</figcaption>
</figure>
</div>
</section>
<section id="descriptive-analysis" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-analysis">Descriptive analysis</h2>
<section id="examining-variables" class="level3">
<h3 class="anchored" data-anchor-id="examining-variables">Examining variables</h3>
<p>Let’s now examine the frequency of the variables HEALTH1, SEX, and IAGEGR4 in the frs_adult2223_short dataset.</p>
<p>We can use the <code>FREQUENCIES</code> command to create a frequency table.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_adult2223_short.sav.
FREQUENCIES VARIABLES=HEALTH1 SEX IAGEGR4
  /ORDER=ANALYSIS.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 11.png" class="img-fluid figure-img"></p>
<figcaption>SPSS output of frequencies of the variables HEALTH1, SEX, and IAGEGR4 in the frs_adult2223_short dataset</figcaption>
</figure>
</div>
<p>Let’s now examine the frequency of the variable famtypbu in the frs_ benunit2223_short dataset.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_benunit2223_short.sav'.
FREQUENCIES VARIABLES=famtypbu
  /ORDER=ANALYSIS.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 12.png" class="img-fluid figure-img"></p>
<figcaption>SPSS output of frequency of the variable famtypbu in the frs_benunit2223_short dataset</figcaption>
</figure>
</div>
<p>The amount of last payment from pension PENPAY is a continuous variable. So, we will use <code>DESCRIPTIVES</code> instead of <code>FREQUENCIES</code> command.</p>
<p>The <code>DESCRIPTIVES</code> command provides a summary of the main statistics including the rang, minimum and maximum values, the mean, and the standard deviation. This command is useful for assessing and detecting extreme values.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_pension2223_short.sav'.
DESCRIPTIVES VARIABLES=PENPAY
  /STATISTICS=MEAN STDDEV RANGE MIN MAX.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 13.png" class="img-fluid figure-img"></p>
<figcaption>SPSS output of descriptives of the variable PENPAY in the frs_pension2223_short dataset</figcaption>
</figure>
</div>
<p><strong>Your turn!</strong></p>
<p>Use the frs_pension2223_short dataset to examine respondents’ pension type PENTYPE.</p>
<ol type="1">
<li>Create a frequency table to measure pension type PENTYPE. Use <code>FREQUENCIES</code> command.</li>
</ol>
<p><strong>Outcome!</strong></p>
<ol type="1">
<li>Frequency table of PENTYPE from the frs_ pension2223_short dataset:</li>
</ol>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_pension2223_short.sav'.  
FREQUENCIES VARIABLES=PENTYPE
  /ORDER=ANALYSIS.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 14.png" class="img-fluid figure-img"></p>
<figcaption>SPSS output of frequency of the variable PENTYPE in the frs_pension2223_short dataset</figcaption>
</figure>
</div>
</section>
</section>
</section>
<section id="the-flat-file" class="level1">
<h1>The Flat File</h1>
<section id="explore-the-datasets-1" class="level2">
<h2 class="anchored" data-anchor-id="explore-the-datasets-1">Explore the datasets</h2>
<p>Let’s have a look at frs_frs2223_short dataset, the short version we have created from the flat file frs_frs2223.</p>
<p>Either inspect variables and cases in the <code>Data View</code> or use the code below to display a dictionary of all the variables in the dataset.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_frs2223_short.sav'. 
DISPLAY DICTIONARY.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 15.png" class="img-fluid figure-img"></p>
<figcaption>SPSS dictionary for frs_frs2223_short dataset</figcaption>
</figure>
</div>
<p>As you know by now, you can have a comprehensive information about the data using the <code>codebook</code> command. So, let’s explore frs_frs2223_short dataset and know more about the variables HEALTHHD and SEXHD.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_frs2223_short.sav'. 
CODEBOOK HEALTHHD SEXHD</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 16.png" class="img-fluid figure-img"></p>
<figcaption>SPSS codebook output of the first three variables in frs_frs2223_short dataset</figcaption>
</figure>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Answers</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>Compare the labels and value labels of the variables that measure long standing illness HEALTH1and Sex SEX (in the ‘frs_adult2223_short’ datasets) and Family type famtypbu (in the frs_benunit2223_short dataset) and those that measures the same variables in the frs_frs2223_short dataset (HEALTHHD, SEXHD and FAMTYPBU, respectively).</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<ol type="a">
<li>Long standing illness in the ‘frs_adult2223_short’: both the lables and value labels are same as in the flat file. (b) Sex in the ‘frs_adult2223_short’: only the label is same as in the flat file. (c) Family type in the frs_benunit2223_short: both the variables labels and value labels are same as in the flat file.</li>
</ol>
<p>However, the variables’ names in the flat file are slightly different than those in the hierarchical files to distinguish them.</p>
</div>
</div>
</div>
</section>
<section id="descriptive-analysis-1" class="level2">
<h2 class="anchored" data-anchor-id="descriptive-analysis-1">Descriptive analysis</h2>
<section id="examining-variables-1" class="level3">
<h3 class="anchored" data-anchor-id="examining-variables-1">Examining variables</h3>
<p>Let’s now examine the frequency of the variables HEALTHHD, SEXHD and FAMTYPBU in the frs_frs2223_short.</p>
<p>We will use the <code>FREQUENCIES</code> command to create frequency tables.</p>
<pre><code>GET FILE='UKDA-9252-spss/spss/frs_frs2223_short.sav'. 
FREQUENCIES VARIABLES=HEALTHHD SEXHD FAMTYPBU
  /ORDER=ANALYSIS.</code></pre>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="SPSS images /Picture 17.png" class="img-fluid figure-img"></p>
<figcaption>SPSS output of frequencies of the variables HEALTHHD, SEXHD and FAMTYPBU in the frs_frs2223_short dataset</figcaption>
</figure>
</div>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Questions</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Answers</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<ol type="1">
<li>How many observations are lone parent?</li>
<li>How many observations are not long standing illness?</li>
<li>What do you notice about the frequencies of FAMTYPBU in frs_frs2223_short dataset and the frequencies of the same variable famtypbu in frs_benunit2223_short dataset?</li>
</ol>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<ol type="1">
<li>There are 1563 lone parent.</li>
<li>There are 15854 persons responded didn’t have long standing illness.</li>
<li>The frequencies of the variables FAMTYPBU in frs_frs2223_short dataset and famtypbu in frs_benunit2223_short dataset are exactly the same as expected.</li>
</ol>
</div>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>